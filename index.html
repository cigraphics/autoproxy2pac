<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>AutoProxy2PAC - 全平台智能代理</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
	<link href="/facebox/facebox.css" media="screen" rel="stylesheet" type="text/css"/>
	<script src="/facebox/facebox.js" type="text/javascript"></script>
	<link type="text/css" rel="stylesheet" href="/static/changelog.css">
	<style type="text/css">
	  a {text-decoration:none;}
	</style>
    <script type="text/javascript">
      function getPacUrl() {
	  	var name = $("input[@name='name']:checked").val();
        if(name != "custom")
		  return name;
        var host = $('#host').val();
        var port = $('#port').val();
        if(host && port)
          return $('#type').val().toLowerCase()+"/"+host+"/"+port;
      }
	  function pageLoaded() {
		loadChangelog(document.getElementById('changelog'),'gfwlist',3);
		more=document.createElement("a");
		more.setAttribute("href","/changelog/gfwlist");
		more.innerHTML="更多...";
		document.getElementById("changelog").appendChild(more);
	  }
    </script>
    <script type="text/javascript" src="/static/changelog.js"></script>
  </head>
  <body onload="pageLoaded()">
    <div style="float:right;max-width:400px">
      <div style="margin-bottom:8px"><a href="gfwtest">哪些网站必须通过代理才能访问？</a></div>
	  <div>
	    <div style="font-weight:bold">
	      gfwlist 近期更新内容
		  <a href="http://feeds.feedburner.com/gfwlist" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="(RSS)" style="vertical-align:middle;border:0"/></a>
		</div>
	    <div id="changelog" style="font-size:12px">加载中...</div>
	  </div>
    </div>
    <div>
    <h1>AutoProxy2PAC</h1>
    <h4>正常网站——直接访问<br/>被墙站点——使用代理</h4>
    <form name="form" action="/" method="post" target="post" style="background-color:#C8E8F3;padding:1em;width:350">
	  <iframe name="post" style="display:none;width:0;height:0"></iframe>
      请选择你使用的代理
      <div>
        {% for item in commonProxy %}
        <input type="radio" name="name" value="{{ item.0 }}" onclick="document.getElementById('proxy-info').style.visibility='hidden'"/>{{ item.1 }}<br/>
        {% endfor %}
        <input type="radio" name="name" value="custom" checked onclick="document.getElementById('proxy-info').style.visibility='visible'"/>其它
      </div>
      <div id="proxy-info">
        <select id="type" name="type">
          <option value="PROXY">HTTP</option>
          <option value="SOCKS">SOCKS</option>
        </select>
        <input type="text" id="host" name="host" size="16" value="127.0.0.1"/>:
        <input type="text" id="port" name="port" size="5"/>
      </div>
      <br/>
      <button type="button" onclick="if(getPacUrl()) { submit(); $.facebox({ ajax: '/usage' }); }">下载PAC文件</button>
      或
      <button type="button" onclick="u=getPacUrl(); if(u) $.facebox({ ajax: '/usage?u='+u })">获取在线版本</button>
    </form>
    <p>请注意PAC文件本身并无翻墙功能，<b>需要配合翻墙工具使用</b></p>
    <p>Firefox用户可安装<a href="http://www.autoproxy.org/">AutoProxy</a>插件获得更多功能</p>
    </div>
    <hr>
    <div style="text-align:center"><font size="-1">我的Twitter: <a href="https://twitter.com/mengxl">@mengxl</a> | 感谢<a href="http://www.autoproxy.org/en/subscriptions">gfwList</a>提供代理规则</font></div>
    <!-- Google Translation code -->
	<!--<div id="google_translate_element"></div>--><script>
	function googleTranslateElementInit() {
	  new google.translate.TranslateElement({
	    pageLanguage: 'zh-CN'
	  }, 'google_translate_element');
	}
	</script><script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <!-- Google Analytics code -->
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-10820515-1']);
	  _gaq.push(['_trackPageview']);
	  (function() {
	    var ga = document.createElement('script');
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    ga.setAttribute('async', 'true');
	    document.documentElement.firstChild.appendChild(ga);
	  })();
	</script>
  </body>
</html>
